<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<title>代理商管理</title>
	<link rel="stylesheet" type="text/css" href="../css/index.css">
	<link rel="stylesheet" type="text/css" href="../css/common.css">
    <link rel="stylesheet" type="text/css" href="../css/set.css">
</head>
<body style="min-width: 1280px;">
<!--父容器开始-->
<div class="outer_div">
	<div class="left_template"></div>
	<div class="right_template"></div>
    <div class="page-set">
    	<h2>代理商设置</h2>
    	<form class="agent-head">
    		<p>按条件筛选：</p>
        	<div class="agent-input">
            	<label>姓名：</label><input type="text" name="searchName" placeholder="">
        		<label>账号：</label><input type="text" name="searchEmail" placeholder="">
                <label>状态：</label>
        		<select class="searchStatus">
        			<option value="启用">启用</option>
        			<option value="禁用">禁用</option>
        		</select>
            </div>
    		<input type="button" value="搜索" name="search" class="blue-btn" id="searchBtn">
    		<input type="button" value="清空" name="clear" class="white-btn">
    	</form>
        <a href="javascript:;" class="addAdmin blue-btn fr">新增</a>
        <!--表格模块开始-->
        <div class="table-wrap">
            <div class="table-head">
                <div class="table-head-wrap">
                    <table class="grid">
                        <colgroup>
                            <col style="width:10%">
                            <col style="width:15%">
                            <col style="width:20%">
                            <col style="width:15%">
                            <col style="width:5%">
                            <col style="width:15%">
                            <col style="width:10%">
                            <col style="width:10%">
                        </colgroup>
                        <thead>
                			<tr>
                				<th>代理商名称</th>
                				<th>联系电话</th>
                				<th>账号</th>
                				<th>代理商所在区域</th>
                				<th>状态</th>
                				<th>专属推荐码</th>
                				<th>级别</th>
                				<th>操作</th>
                			</tr>
                        </thead>
                    </table>
                </div>
            </div>
            <div class="table-content table-content2">
                <table class="grid">
                    <colgroup>
                        <col style="width:10%">
                        <col style="width:15%">
                        <col style="width:20%">
                        <col style="width:15%">
                        <col style="width:5%">
                        <col style="width:15%">
                        <col style="width:10%">
                        <col style="width:10%">
                    </colgroup>
                    <tbody class="table_ctbody">
            			<tr>
            				<td><a href="javascript:;" class="adminDetails">名称A</a></td>
            				<td>15612345678</td>
            				<td>chenkaiwen@527so.com</td>
            				<td>广东广州天河</td>
            				<td>启用</td>
            				<td>YSSLDKGAJ123123</td>
            				<td>一级代理</td>
            				<td class="tda2">
            					<a href="javascript:;" class="agentRedact fl">编辑</a>
            					<a href="javascript:;" class="removeBtn fr">删除</a>
            				</td>
            			</tr>
            			<tr>
            				<td><a href="javascript:;" class="adminDetails">名称B</a></td>
            				<td>15612345678</td>
            				<td>chenkaiwen@527so.com</td>
            				<td>广东广州天河</td>
            				<td>禁用</td>
            				<td>YSSLDKGAJ123123</td>
            				<td>二级代理</td>
            				<td class="tda2">
            					<a href="javascript:;" class="agentRedact fl">编辑</a>
            					<a href="javascript:;" class="removeBtn fr">删除</a>
            				</td>
            			</tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!--表格模块结束-->
        <!--分页器开始-->
        <div class="xiansuo_Page_Div">
            <!--<div class="xiansuo_Page_border"></div>-->
            <div class="xiansuo_Page_div">
                <div class="fl">
                    <span style="margin-right: 5px;">每页显示</span>
                    <select class="xiansuo_Page_Three">
                        <option value="10">10</option>
                        <option value="50">50</option>
                        <option value="100">100</option>
                    </select>
                    <span style="margin-left: 5px;">条</span><span style="margin-left: 10px;">共</span><span class="xiansuo_Sizes">1500</span><span>条/</span><span class="xiansuo_Pages">50页</span>
                    <img class="first_page" title="第一页" src="../Images/icon_sanjiao_01.png" alt="" />
                    <img class="prev_page" title="上一页" src="../Images/icon_sanjiao_02.png" alt="" />
                </div>
                <ul class="xiansuo_Page_list">
                    <li class="active">1</li>
                    <li>2</li>
                    <li>3</li>
                    <li>4</li>
                    <li>5</li>
                </ul>
                <img class="next_page" title="下一页" style="margin-left: 15px;" src="../Images/icon_sanjiao_03.png" alt="" />
                <img class="last_page" title="最后一页" src="../Images/icon_sanjiao_04.png" alt="" />
                <span style="margin: 0 5px;">跳转</span><input type="text" value="0" class="that_Page" maxlength="10" /><span style="margin-left: 5px;">页</span>
            </div>
        </div>
        <!--分页器结束-->
        <!-- 虚拟弹窗开始 -->
        <!-- 背景 -->
        <div class="moni-box" style="display: none;"></div>
        <!-- 新增代理商 -->
        <div class="add-admin moni-lbox" style="display: none;">
            <div class="moni-head">
                <p class="fl">新增代理商</p>
                <em class="DataCenterBox-cols cleanAll fr">&#215;</em>
            </div>
            <form class="moni-main">
                <label>姓名</label><i>：</i>
                <input type="text" name="name" placeholder="代理商名称"><br />
                <label>电话</label><i>：</i>
                <input type="text" name="phone" placeholder="代理商电话"><br />
                <label>账号</label><i>：</i>
                <input type="text" name="ID" placeholder="代理商账号"><br />
                <label>密码</label><i>：</i>
                <input type="password" name="password"><br />
                <label>区域</label><i>：</i>
                <div class="moni-area">
                    <!-- 省 -->
                    <select>
                        <option value="1">请选择</option>
                        <option value="2">22-25</option>
                        <option value="3">26-29</option>
                        <option value="4">30-35</option>
                        <option value="5">35-40</option>
                    </select>
                    <!-- 市 -->
                    <select>
                        <option value="1">请选择</option>
                        <option value="2">22-25</option>
                        <option value="3">26-29</option>
                        <option value="4">30-35</option>
                        <option value="5">35-40</option>
                    </select>
                    <!-- 县 -->
                    <select>
                        <option value="1">请选择</option>
                        <option value="2">22-25</option>
                        <option value="3">26-29</option>
                        <option value="4">30-35</option>
                        <option value="5">35-40</option>
                    </select>
                </div><br />
                <label>详细地址</label><i>：</i>
                <input type="text" name="address" placeholder="请输入详细地址"><br />
                <label>推荐码</label><i>：</i><span>YSGASD11001</span><br />
                <label>银行账号</label><i>：</i>
                <select>
                    <option value="中国银行" id="bankName">中国银行</option>
                    <option value="建设银行">建设银行</option>
                    <option value="其他银行">其他银行</option>
                </select><br />
                <label>&nbsp;</label><i>&nbsp;</i>
                <input type="text" name="bankCode" id="bankCode" maxlength="23" placeholder="卡号"><br />
                <label>&nbsp;</label><i>&nbsp;</i>
                <input type="text" name="peopleName" placeholder="姓名"><br />
                <label class="vit-top">企业资质</label><i class="vit-top">：</i><input type="file" name="" id="file0">
                <label for="file0"><img src="../Images/file0.png" id="img0" width="74px" height="100px"></label><br />
                <label class="vit-top">备注</label><i class="vit-top">：</i><textarea name="tips"></textarea>
                <div class="btn-box">
                    <input type="button" name="submit" value="确认" class="submit blue-btn" id="addAgentSub">
                    <input type="button" name="cancel" value="取消" class="cancel white-btn">
                </div>
            </form>
        </div>
        <!-- 代理商详情 -->
        <div class="admin-details moni-lbox" style="display: none;">
            <div class="moni-head">
                <p class="fl">代理商详情</p>
                <em class="DataCenterBox-cols cleanAll fr">&#215;</em>
            </div>
            <div class="moni-main">
                <label>姓名</label><i>：</i>
                <span class="name">姓名A</span><br />
                <label>账号</label><i>：</i>
                <span class="ID">chengaiwen@527so.com</span><br />
                <label>电话号码</label><i>：</i>
                <span class="phone">15612345678</span><br />
            	<label>区域</label><i>：</i>
            	<span class="area">广东广州天河</span><br />
            	<label>详细地址</label><i>：</i>
            	<span class="address">大观中路95号407-408</span><br />
                <label>状态</label><i>：</i>
                <span class="status">启用</span><br />
            	<label>推荐码</label><i>：</i>
                <span class="referralCode">YGSGE110010</span><br />
            	<label>银行账号</label><i>：</i>
                <span class="bankName">中国银行</span><br />
                <label>&nbsp;</label><i>&nbsp;</i>
                <span class="bankCode">6223458974586541235</span><br />
                <label>&nbsp;</label><i>&nbsp;</i>
                <span class="peopleName">XXX公司</span><br />
            	<label>备注</label><i>：</i>
            	<span class="tips">无</span><br />
                <label>创建日期</label><i>：</i>
                <span class="addTime">2017-10-30 11：48</span><br />
                <label>更新日期</label><i>：</i>
                <span class="updateTime">2017-10-30 18：48</span>
            </div>
        </div>
        <!-- 编辑代理商 -->
        <div class="agent-redact moni-lbox" style="display: none;">
            <div class="moni-head">
                <p class="fl">编辑代理商</p>
                <em class="DataCenterBox-cols cleanAll fr">&#215;</em>
            </div>
            <form class="moni-main">
                <label class="long-text">姓名</label><i>：</i>
                <input type="text" name="name" placeholder=""><br />
                <label class="long-text">电话</label><i>：</i>
                <input type="text" name="phone" placeholder=""><br />
                <label class="long-text">账号</label><i>：</i>
                <input type="text" name="ID" placeholder=""><br />
                <label class="long-text">密码</label><i>：</i>
                <input type="password" name="password" placeholder=""><br />
                <label class="long-text">区域</label><i>：</i>
                <div class="moni-area">
                    <!-- 省 -->
                    <select>
                        <option value="1">请选择</option>
                        <option value="2">22-25</option>
                        <option value="3">26-29</option>
                        <option value="4">30-35</option>
                        <option value="5">35-40</option>
                    </select>
                    <!-- 市 -->
                    <select>
                        <option value="1">请选择</option>
                        <option value="2">22-25</option>
                        <option value="3">26-29</option>
                        <option value="4">30-35</option>
                        <option value="5">35-40</option>
                    </select>
                    <!-- 县 -->
                    <select>
                        <option value="1">请选择</option>
                        <option value="2">22-25</option>
                        <option value="3">26-29</option>
                        <option value="4">30-35</option>
                        <option value="5">35-40</option>
                    </select>
                </div><br />
                <label class="long-text">详细地地址</label><i>：</i>
                <input type="text" name="address" placeholder="请输入详细地址"><br />
                <label class="long-text">启动状态</label><i>：</i>
                <select class="status">
                    <option value="">启用</option>
                    <option value="">禁用</option>
                </select><br />
        		<label class="vit-top long-text">备注</label><i class="vit-top">：</i>
        		<textarea name="tips">150个字内</textarea><br />
                <label class="long-text">创建日期</label><i>：</i>
                <span class="addTime">2017-10-30 17:50</span><br />
                <label class="long-text">更新日期</label><i>：</i>
                <span class="updateTime">2017-10-30 18：59</span><br />
                <div class="btn-box">
                    <input type="button" name="submit" value="确认" class="submit blue-btn" id="agentRedactSub">
                    <input type="button" name="cancel" value="取消" class="cancel white-btn">
                </div>
            </form>
        </div>
        <!-- 删除按钮 -->
        <div class="remove-box moni-lbox" style="display: none;">
            <p>确认删除？</p>
            <div class="btn-box">
                <input type="button" value="确认" name="remove" class="removeSubmit blue-btn">
                <input type="button" value="取消" name="cancel" class="cancel white-btn">
            </div>
        </div>
        <!-- 虚拟弹窗结束 -->
    </div>
</div>
<script>var pages = "角色管理";var index1 = 3; var index2 = 1;</script>
<script src="../js/jquery.js"></script>
<script src="../js/common.js"></script>
<script src="../js/role.js"></script>
<script src="../js/bankcard.js"></script>
<script type="text/javascript">
    // 银行卡验证
    $(document).on("click","#submit",function(){
        var bankText = $("#bankCode").val();
        console.log(bankText);
        var abc = bankText.substring(0,7);//获取用户输入的前四位

        console.log(abc);
        console.log(bankBin);
        var bankBinWhere = bankBin.indexOf(abc);
        console.log(bankBinWhere);
        var bankNamei = bankBinWhere;
        var bankNameHere = bankName[bankNamei];
        if (bankBinWhere = -1) {
            console.log(bankNameHere);
            $("#bankName").text(bankNameHere);
            $("option:not(#bankName)").remove();
        }else{
            console.log("银行卡号不存在");
        }
        
    });

    //后台提交
    //搜索按钮
    $(document).on("click","#searchBtn",function(){
        var searchName = $("input[name=searchName]").val(),
        searchEmail = $("input[name=searchEmail]").val(),
        status = $(".searchStatus:visible").val(),
        emailreg = /^[a-z0-9-_.]+@[\da-z][\.\w-]+\.[a-z]{2,4}$/i;
        if (searchName == "" || searchEmail == "") {
            alert("搜索项不能为空");
        } else if (!emailreg.test(searchEmail)) {
            alert("请输入正确的账号（邮箱格式如：quesou@527so.com）");
        } else {
            console.log(searchName,searchEmail,status);
        }
    });
    //新增代理商
    $(document).on("click","#addAgentSub",function(){
        var name = $("input[name=name]:visible").val(),
        phone = $("input[name=phone]:visible").val(),
        ID = $("input[name=ID]:visible").val(),
        password = $("input[name=password]:visible").val(),
        area = $(".area").val(),
        address = $(".address").val(),
        referralCode,//ajax获取推荐码 
        bankCard = $("input[bankCode]").val(),
        peopleName = $("input[name=peopleName]").val(),
        imgFile = $("input[type=file]").val(),
        tips = $("textarea[name=tips]").val();
        checkForm();//表单验证函数
        console.log(name,phone,ID,password,area,address,referralCode,bankCard,peopleName,imgFile,tips);//ajax提交
    });

    //代理商详情
    $(function(){
        var ziliaojson;//ajax获取数据
        $(".name").text(ziliaojson);
        $(".phone").text(ziliaojson);
        $(".ID").text(ziliaojson);
        $(".area").text(ziliaojson);
        $(".address").text(ziliaojson);
        $(".status").text(ziliaojson);
        $(".referralCode").text(ziliaojson);
        $(".bankName").text(ziliaojson);
        $(".bankCode").text(ziliaojson);
        $(".peopleName").text(ziliaojson);
        $(".tips").text(ziliaojson);
        $(".addTime").text(ziliaojson);
        $(".updateTime").text(ziliaojson);
    });

    //编辑代理商
    $(document).on("click",".agentRedact",function(){
        //弹出虚拟窗
        $(".agent-redact,.moni-box").fadeIn();
        //显示已有数据
        var ziliaojson;//ajax获取数据
        $("input[name=name]").val(ziliaojson);
        $("input[name=phone]").val(ziliaojson);
        $("input[name=ID]").val(ziliaojson);
        $("input[name=password]").val(ziliaojson);
        $(".area").val(ziliaojson);
        $("input[name=address]").val(ziliaojson);
        $(".status").val(ziliaojson);
        $("textarea[name=tips]").val(ziliaojson);
        $(".addTime").text(ziliaojson);
        $(".updateTime").text(ziliaojson);
        //提交修改
        $("#agentRedactSub").click(function(){
            var name = $("input[name=name]:visible").val(),
            phone = $("input[name=phone]:visible").val(),
            ID = $("input[name=ID]:visible").val(),
            password = $("input[name=password]:visible").val(),
            area = $(".area").val(),
            address = $(".address").val(),
            referralCode,//ajax获取推荐码 
            bankCard = $("input[bankCode]").val(),
            peopleName = $("input[name=peopleName]").val(),
            imgFile = $("input[type=file]").val(),
            tips = $("textarea[name=tips]").val();
            checkForm();//表单验证函数
            console.log(name,phone,ID,password,area,address,referralCode,bankCard,peopleName,imgFile,tips);//ajax提交
        });
    });

    //删除代理商
    // 删除按钮
    $(document).on("click",".removeBtn",function(){
        $(this).parents("tr").addClass("remove");
        var trId = $(this).parents("tr").attr("name");//取得删除那一行的name值
        $(".remove-box,.moni-box").fadeIn();
        $(document).on("click",".removeSubmit",function(){
            $(".remove").remove(); 
            $(".remove-box,.moni-box").fadeOut();
            console.log(trId);//发起ajax
        })
    })
</script>
</body>
</html>