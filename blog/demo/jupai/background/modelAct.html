
<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="csrf-token" content="I9VnGhpb1YFgTJPiLA7u89h73Ps15wcxGo4Lhguy" />
<meta name="renderer" content="webkit">
<meta name="description" content="聚派科技，国内首家移动场景营销广告平台。广告sdk流量变现联盟，ios、android广告插件sdk，新型互联网app流量变现模式；场景营销广告联盟，cpa cpm cpc cps cpt等。聚派-简单连接一切，开启智慧生活。">
<meta name="keywords" content="流量变现、app流量变现、广告sdk、sdk广告、场景营销、cpm广告联盟、app广告联盟、广告联盟">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=IE8">
<title>聚派-SDK-车型管理</title>
<link rel="stylesheet" href="/css/metisMenu.min.css">
<link href="/css/city-picker.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="css/index.css">
</head>
<body>
	<div id="wrapper">
    
				<!-- 右侧 -->
		<div class="content_wrap" style="margin-left:0;">
			<div class="content">
    <div class="container custom-edit-container clearfix">
        <!-- <h5><span><a href="http://www.soundtooth.cn/childAccountList">客户列表</a>&nbsp;&gt;&gt;&nbsp;编辑</span></h5> -->
        <div class="vital-row-box">
            <div class="vital-row modelId">
                <span class="left">*车型ID:</span>
                <input type="text" maxlength="128" id="modelId" placeholder="请输入车型ID" autocomplete="off">
                <span class="tips"></span>
            </div>
            <div class="vital-row modelName">
                <span class="left">车型名称:</span>
                <input type="text" maxlength="256" id="modelName" placeholder="请输入车系中文名称" autocomplete="off">
                <span class="tips"></span>
            </div>
            <div class="vital-row fkSeriesId">
                <span class="left">所属车系:</span>
                <input type="text" maxlength="256" id="fkSeriesId" placeholder="请输入所属车系" autocomplete="off">
                <span class="tips"></span>
            </div>
            <div class="vital-row price">
                <span class="left">价格:</span>
                <input type="text" maxlength="256" id="price" placeholder="价格" autocomplete="off">
                <span class="tips"></span>
            </div>
            
            <div class="vital-row role">
                
            </div>
           <!--  <div class="vital-row unit-price">
                <span class="left">*设备单价:</span>
                <input type="number" id="unit-price" placeholder="请输入设备单价">
                <div class="dib">
                    <input type="radio" name="box-type" id="box-type-0" class="regular-radio" value="0">
                    <label for="box-type-0"></label>
                    <label for="box-type-0">元/个</label>
                    <input type="radio" name="box-type" id="box-type-1" class="regular-radio" value="1">
                    <label for="box-type-1"></label>
                    <label for="box-type-1"> 元/个/月</label>
                </div>
                <span class="tips">请输入客户购买/租用设备的单价</span>
            </div> 
            <div class="vital-row hardware-num">
                <span class="left">*设备数量:</span>
                <input type="number"  id="hardware-num" placeholder="请输入购买/租用设备的数量">个
                <span class="tips">请输入客户购买/租用设备的数量</span>
            </div>
            -->
          <!--   <div class="vital-row user-type">
                <span class="left">*用户类型:</span>
                <div class="check-box">
                    <div class="">
                        <input type="radio" name="user-type" id="user-type-0" class="regular-radio" value="0" checked>
                        <label for="user-type-0"></label>
                        <span>广告主</span>
                    </div>
                    <div class="">
                        <input type="radio" name="user-type" id="user-type-1" class="regular-radio" value="1">
                        <label for="user-type-1"></label>
                        <span>代理商</span>
                    </div>
                </div>
            </div> -->
           
           <!--  <div class="vital-row A">
                <span class="left">客户权限:</span>
                <div class="check-box">
                    <div class="">
                        <input type="checkbox" name="checkbox" id="share-scene" class="regular-checkbox" value="1" checked>
                        <label for="share-scene"></label>
                        <span>场景管理</span>
                    </div>
                    <div class="">
                        <input type="checkbox" name="checkbox" id="message-manage" class="regular-checkbox" value="2" checked>
                        <label for="message-manage"></label>
                        <span>广告管理</span>
                    </div>
                </div>
            </div>
            <div class="vital-row" id="message-box">
                <span class="left">APP广告单价:</span>
                <input type="number" class="" id="message-price" placeholder="请输入客户发布APP广告的单价">元/条
            </div>
            <div class="vital-row" id="box-message-box">
                <span class="left">设备广告单价:</span>
                <input type="number" class="" id="box-message-price" placeholder="请输入客户发布设备广告的单价">元/条
            </div> -->

        </div>
        <button id="submit-button">确定</button>
    </div>
</div>

			
		</div>
	</div>
	<div class="loading-area">
		<div class="loading-mask"></div>
		<div class="loading-icon"></div>
	</div>
	<!--[if !IE]> -->
	<script src="/js/jquery-2.1.4.min.js"></script>
	<!-- <![endif]-->
	<!--[if IE]>
	<script src="/js/jquery-1.11.3.min.js"></script>
	<![endif]-->
	<script src="/background/js/metisMenu.js"></script>
	<script>
		$(function() {
			 $('#menu').metisMenu({
				toggle: false
			});
		});
	</script>
	<script type="text/javascript">
	$(document).ready(function(){
		$(".post_content a[href='"+window.location.href+"']").addClass("selflink")
		$('.selflink').click(function() {return false;});
		$.fn.scrollFollow=function(options){options=options||{};options.container=options.container||$(this).parent();options.bottomObj=options.bottomObj||'';options.bottomMargin=options.bottomMargin||0;options.marginTop=options.marginTop||0;options.marginBottom=options.marginBottom||0;$window=$(window),$scrollObj=$(this);if($scrollObj.length<=0){return}scrollObj_Top=$scrollObj.position().top,scrollObj_Container_Height=options.container.height(),scrollObj_Position=$scrollObj.css("position");if(options.bottomObj==''||$(options.bottomObj).length<=0){is_bottomObj_exists=false}else{is_bottomObj_exists=true}$window.scroll(function(event){var new_scrollObj_Container_Height=options.container.height();var scrollObj_Height=$scrollObj.height();if(scrollObj_Container_Height!=new_scrollObj_Container_Height&&scrollObj_Container_Height<new_scrollObj_Container_Height+scrollObj_Height){scrollObj_Top=$scrollObj.position().top;scrollObj_Container_Height=new_scrollObj_Container_Height}scrollTop=$window.scrollTop(),topPosition=Math.max(0,scrollObj_Top-scrollTop);if(is_bottomObj_exists==true){var bottomObj_Top=$(options.bottomObj).position().top-options.marginBottom-options.marginTop;topPosition=Math.min(topPosition,(bottomObj_Top-scrollTop)-scrollObj_Height)}if(scrollTop>scrollObj_Top){if(is_bottomObj_exists==true&&(scrollObj_Top+scrollObj_Height>bottomObj_Top)){$scrollObj.css({position:scrollObj_Position,top:scrollObj_Top})}else{if(window.XMLHttpRequest){$scrollObj.css({position:"fixed",top:topPosition+options.marginTop})}else{$scrollObj.css({position:"absolute",top:scrollTop+topPosition+options.marginTop+'px'})}}}else{$scrollObj.css({position:scrollObj_Position,top:scrollObj_Top})}})};
		$(".sidebar").scrollFollow({
			bottomObj: '.footer',
			marginTop: 0,
			marginBottom: 2
		});

	});
	</script>
	<script src="/background/js/bootstrap.min.js"></script>
<script src="/js/city-picker.data.js"></script>
<script src="/js/city-picker.js"></script>
<script type="text/javascript" src="/background/js/custom.js"></script>
<script type="text/javascript" src="/js/layer.js"></script>
<script type="text/javascript" src="/js/datas/province.js"></script>
<script type="text/javascript" src="/js/datas/cities.js"></script>
<script type="text/javascript">
$("#role   option[value='2']").attr("selected",true);
var posturl = "";
var tip="";
$(document).ready(function() {
    $.each(province,function(i,v){
        $("#provinceCode").append('<option value=\''+v.modelId+'\'>'+v.modelName+'</option>')
    });
    $("#provinceCode").change(changeprovince);
    $("#cityCode").change(changecity);

        if(getParam("modelId")){
            posturl="/background/provinceUpdate.do";
            tip="修改";
             $("#modelId").val(getParam("modelId"));
             $.ajax({
                    url: '/background/getmodels.do?modelId='+$("#modelId").val(),
                    type: 'get',
                    dataType: 'json'
                   
                })
                .done(function(json) {
                    console.log("success");
                    console.log(json);
                    $("#modelId").val(json.data.modelId);
                        $("#modelName").val(json.data.modelName);
                        $("#fkSeriesId").val(json.data.fkSeriesId);
                    if(json.errCode=='200'){
                        $("#modelId").val(json.data.modelId);
                        $("#modelName").val(json.data.modelName);
                        $("#fkSeriesId").val(json.data.fkSeriesId);
                       
                        
                       
                    }else{
                        layer.alert(json.errMsg);
                    }
                })
                .fail(function() {
                    console.log("error");
                })
                .always(function() {
                    console.log("complete");
                });
            }else{
                
                posturl="/background/modelAdd.do";
                tip="添加";
            }

            $("#submit-button").click(function(event){
                event.preventDefault();
               
                if ($("#modelId").val().trim()=='') {
                    layer.msg('请输入车系ID', {icon: 5,time: 2000});
                    return;
                }
                if ($("#modelName").val().trim()=='') {
                    layer.msg('请输入车系中文名称', {icon: 5,time: 2000});
                    return;
                }
                if ($("#fkSeriesId").val().trim()=='') {
                    layer.msg('请输入车系英文名称', {icon: 5,time: 2000});
                    return;
                }
                
                $.ajax({
                    url: posturl,
                    type: 'post',
                    dataType: 'json',
                    async:false,
                    data: {
                        modelId:$("#modelId").val(),
                        modelName:$("#modelName").val(),
                        fkSeriesId:$("#fkSeriesId").val(),
                        price:$("#price").val()
                        
                    }
                })
                .done(function(json) {
                    console.log("success");
                    console.log(json);
                    if(json.errCode=='200'){
                        layer.alert(tip+"省份成功",function(){

                             window.location.reload();

                        });
                        // layer.msg(tip+"专营店成功", {icon: 5,time: 2000});
                       
                    }else{
                        layer.alert(json.errMsg);
                    }
                })
                .fail(function() {
                    console.log("error");
                })
                .always(function() {
                    console.log("complete");
                });
            });
       
});

function getParam(paramName) {
            paramValue = "";
            isFound = false;
            //alert(location.href);
            if (this.location.search.indexOf("?") == 0 && this.location.search.indexOf("=") > 1) {
                arrSource = unescape(this.location.search).substring(1, this.location.search.length).split("&");
                i = 0;
                while (i < arrSource.length && !isFound) {
                    if (arrSource[i].indexOf("=") > 0) {
                        if (arrSource[i].split("=")[0].toLowerCase() == paramName.toLowerCase()) {
                            paramValue = arrSource[i].split("=")[1];
                            isFound = true;
                        }
                    }
                    i++;
                }
            }
            return paramValue;
        }

function changeprovince(){
    $("#cityCode>option").remove();
    $.each(cities,function(i,v){
        if(v.modelId==$("#provinceCode option:selected").val()){
            $("#cityCode").append('<option value="'+v.cityId+'">'+v.cityName+'</option>')
        }
    });
    $("#province").val($("#provinceCode option:selected").text());

}
function changecity(){
    $("#city").val($("#cityCode option:selected").text());
}
</script>
</body>
</html>

