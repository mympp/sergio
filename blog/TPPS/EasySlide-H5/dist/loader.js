!function(e,t){function r(){this.resources={},this.audio={},this.video={}}var o=e.EasySlide,n=o.utils;r.prototype={constructor:r,getFilename:function(e){return e.slice(e.lastIndexOf("/")+1).replace(/\?.*$/,"").toLowerCase()},getExtName:function(e){return e.slice(e.lastIndexOf(".")+1,e.length).toLowerCase()},getCreateNode:function(e){var t={img:["jpg","jpeg","gif","png","bmp"]};for(var r in t)if(t.hasOwnProperty(r)&&t[r].indexOf(e)>-1)return r;return null},_getResourcesMap:function(e){var t=this;e.forEach(function(e){var r,o,n;if("object"==typeof e?(r=e.name,o=t.getExtName(e.path),n=e.path):(r=t.getFilename(e),o=t.getExtName(e),n=e),t.resources[r]={path:n,name:r,type:o,node:t.getCreateNode(o)},null===t.resources[r].node)throw new Error("load resource ext is not support"+o+","+n)})},_fetch:function(e,r){var o=e.path,i=e.node,s=t.createElement(i);"img"===i&&(s.onload=s.onerror=function(){n.remove(s),r()}),s.style.display="none",s.src=o,t.body.appendChild(s)},loader:function(e){function t(){n++,r.trigger("progress",[(n/o*100).toFixed(2)]),n===o&&r.trigger("loaded")}var r=this,o=0,n=0;this._getResourcesMap(e),o=Object.keys(this.resources).length;for(var i in this.resources)this.resources.hasOwnProperty(i)&&this._fetch(this.resources[i],t)}};var i=o.prototype.init;o.prototype.init=function(){r.call(this),i.call(this)},o.prototype=n.mixin(o.prototype,r.prototype)}(window,document);